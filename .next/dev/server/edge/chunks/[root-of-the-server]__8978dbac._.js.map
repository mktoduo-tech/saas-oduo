{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\r\nimport type { NextRequest } from \"next/server\"\r\n\r\nexport function middleware(req: NextRequest) {\r\n    // Verifica se o usuário está logado através do token de sessão\r\n    const token = req.cookies.get(\"authjs.session-token\") || req.cookies.get(\"__Secure-authjs.session-token\")\r\n    const isLoggedIn = !!token\r\n\r\n    // Rotas protegidas que requerem autenticação\r\n    const protectedRoutes = [\r\n        \"/dashboard\",\r\n        \"/equipamentos\",\r\n        \"/clientes\",\r\n        \"/reservas\",\r\n        \"/usuarios\",\r\n        \"/financeiro\",\r\n        \"/configuracoes\",\r\n        \"/integracoes\",\r\n        \"/marketing\",\r\n        \"/logs\",\r\n        \"/ajuda\",\r\n        \"/relatorios\"\r\n    ]\r\n\r\n    const isOnProtectedRoute = protectedRoutes.some(route => req.nextUrl.pathname.startsWith(route))\r\n\r\n    // Se está em rota protegida e não está logado, redireciona para login\r\n    if (isOnProtectedRoute && !isLoggedIn) {\r\n        return NextResponse.redirect(new URL(\"/login\", req.nextUrl))\r\n    }\r\n\r\n    // Se está logado e tenta acessar login ou cadastro, redireciona para dashboard\r\n    if (isLoggedIn && (req.nextUrl.pathname === \"/login\" || req.nextUrl.pathname === \"/cadastro\")) {\r\n        return NextResponse.redirect(new URL(\"/dashboard\", req.nextUrl))\r\n    }\r\n\r\n    return NextResponse.next()\r\n}\r\n\r\nexport const config = {\r\n    matcher: [\"/((?!api|_next/static|_next/image|favicon.ico).*)\"],\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAGO,SAAS,WAAW,GAAgB;IACvC,+DAA+D;IAC/D,MAAM,QAAQ,IAAI,OAAO,CAAC,GAAG,CAAC,2BAA2B,IAAI,OAAO,CAAC,GAAG,CAAC;IACzE,MAAM,aAAa,CAAC,CAAC;IAErB,6CAA6C;IAC7C,MAAM,kBAAkB;QACpB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACH;IAED,MAAM,qBAAqB,gBAAgB,IAAI,CAAC,CAAA,QAAS,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC;IAEzF,sEAAsE;IACtE,IAAI,sBAAsB,CAAC,YAAY;QACnC,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,UAAU,IAAI,OAAO;IAC9D;IAEA,+EAA+E;IAC/E,IAAI,cAAc,CAAC,IAAI,OAAO,CAAC,QAAQ,KAAK,YAAY,IAAI,OAAO,CAAC,QAAQ,KAAK,WAAW,GAAG;QAC3F,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,cAAc,IAAI,OAAO;IAClE;IAEA,OAAO,gMAAY,CAAC,IAAI;AAC5B;AAEO,MAAM,SAAS;IAClB,SAAS;QAAC;KAAoD;AAClE"}}]
}