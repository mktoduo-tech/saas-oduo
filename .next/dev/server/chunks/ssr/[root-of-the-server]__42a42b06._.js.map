{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mktod/OneDrive/Documentos/GitHub/saas-oduo/src/lib/auth.ts"],"sourcesContent":["import NextAuth from \"next-auth\"\r\nimport Credentials from \"next-auth/providers/credentials\"\r\nimport { PrismaClient } from \"@prisma/client\"\r\nimport bcrypt from \"bcryptjs\"\r\n\r\nconst prisma = new PrismaClient()\r\n\r\nexport const { handlers, signIn, signOut, auth } = NextAuth({\r\n    secret: process.env.AUTH_SECRET,\r\n    providers: [\r\n        Credentials({\r\n            name: \"Credentials\",\r\n            credentials: {\r\n                email: { label: \"Email\", type: \"email\" },\r\n                password: { label: \"Password\", type: \"password\" },\r\n            },\r\n            authorize: async (credentials) => {\r\n                try {\r\n                    if (!credentials?.email || !credentials?.password) {\r\n                        return null\r\n                    }\r\n\r\n                    // Buscar usuário no banco de dados\r\n                    const user = await prisma.user.findUnique({\r\n                        where: { email: credentials.email as string },\r\n                        include: { tenant: true },\r\n                    })\r\n\r\n                    if (!user) {\r\n                        return null\r\n                    }\r\n\r\n                    // Verificar senha\r\n                    const passwordMatch = await bcrypt.compare(\r\n                        credentials.password as string,\r\n                        user.passwordHash\r\n                    )\r\n\r\n                    if (!passwordMatch) {\r\n                        return null\r\n                    }\r\n\r\n                    // Retornar dados do usuário\r\n                    return {\r\n                        id: user.id,\r\n                        name: user.name,\r\n                        email: user.email,\r\n                        tenantId: user.tenantId,\r\n                        tenantName: user.tenant.name,\r\n                        tenantSlug: user.tenant.slug,\r\n                        role: user.role,\r\n                    }\r\n                } catch (error) {\r\n                    console.error(\"Erro na autenticação:\", error)\r\n                    return null\r\n                } finally {\r\n                    await prisma.$disconnect()\r\n                }\r\n            },\r\n        }),\r\n    ],\r\n    pages: {\r\n        signIn: \"/login\",\r\n        error: \"/auth/error\",\r\n    },\r\n    callbacks: {\r\n        async session({ session, token }) {\r\n            if (token && session.user) {\r\n                session.user.id = token.id as string\r\n                session.user.tenantId = token.tenantId as string\r\n                session.user.tenantName = token.tenantName as string\r\n                session.user.tenantSlug = token.tenantSlug as string\r\n                session.user.role = token.role as string\r\n            }\r\n            return session\r\n        },\r\n        async jwt({ token, user }) {\r\n            if (user && user.id) {\r\n                token.id = user.id\r\n                token.tenantId = user.tenantId\r\n                token.tenantName = user.tenantName\r\n                token.tenantSlug = user.tenantSlug\r\n                token.role = user.role\r\n            }\r\n            return token\r\n        },\r\n    },\r\n})\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AAAA;AACA;AACA;;;;;AAEA,MAAM,SAAS,IAAI,6IAAY;AAExB,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,IAAA,gKAAQ,EAAC;IACxD,QAAQ,QAAQ,GAAG,CAAC,WAAW;IAC/B,WAAW;QACP,IAAA,qKAAW,EAAC;YACR,MAAM;YACN,aAAa;gBACT,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YACpD;YACA,WAAW,OAAO;gBACd,IAAI;oBACA,IAAI,CAAC,aAAa,SAAS,CAAC,aAAa,UAAU;wBAC/C,OAAO;oBACX;oBAEA,mCAAmC;oBACnC,MAAM,OAAO,MAAM,OAAO,IAAI,CAAC,UAAU,CAAC;wBACtC,OAAO;4BAAE,OAAO,YAAY,KAAK;wBAAW;wBAC5C,SAAS;4BAAE,QAAQ;wBAAK;oBAC5B;oBAEA,IAAI,CAAC,MAAM;wBACP,OAAO;oBACX;oBAEA,kBAAkB;oBAClB,MAAM,gBAAgB,MAAM,4IAAM,CAAC,OAAO,CACtC,YAAY,QAAQ,EACpB,KAAK,YAAY;oBAGrB,IAAI,CAAC,eAAe;wBAChB,OAAO;oBACX;oBAEA,4BAA4B;oBAC5B,OAAO;wBACH,IAAI,KAAK,EAAE;wBACX,MAAM,KAAK,IAAI;wBACf,OAAO,KAAK,KAAK;wBACjB,UAAU,KAAK,QAAQ;wBACvB,YAAY,KAAK,MAAM,CAAC,IAAI;wBAC5B,YAAY,KAAK,MAAM,CAAC,IAAI;wBAC5B,MAAM,KAAK,IAAI;oBACnB;gBACJ,EAAE,OAAO,OAAO;oBACZ,QAAQ,KAAK,CAAC,yBAAyB;oBACvC,OAAO;gBACX,SAAU;oBACN,MAAM,OAAO,WAAW;gBAC5B;YACJ;QACJ;KACH;IACD,OAAO;QACH,QAAQ;QACR,OAAO;IACX;IACA,WAAW;QACP,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC5B,IAAI,SAAS,QAAQ,IAAI,EAAE;gBACvB,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,EAAE;gBAC1B,QAAQ,IAAI,CAAC,QAAQ,GAAG,MAAM,QAAQ;gBACtC,QAAQ,IAAI,CAAC,UAAU,GAAG,MAAM,UAAU;gBAC1C,QAAQ,IAAI,CAAC,UAAU,GAAG,MAAM,UAAU;gBAC1C,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI;YAClC;YACA,OAAO;QACX;QACA,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACrB,IAAI,QAAQ,KAAK,EAAE,EAAE;gBACjB,MAAM,EAAE,GAAG,KAAK,EAAE;gBAClB,MAAM,QAAQ,GAAG,KAAK,QAAQ;gBAC9B,MAAM,UAAU,GAAG,KAAK,UAAU;gBAClC,MAAM,UAAU,GAAG,KAAK,UAAU;gBAClC,MAAM,IAAI,GAAG,KAAK,IAAI;YAC1B;YACA,OAAO;QACX;IACJ;AACJ","debugId":null}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mktod/OneDrive/Documentos/GitHub/saas-oduo/src/app/%28admin%29/providers.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Providers = registerClientReference(\n    function() { throw new Error(\"Attempted to call Providers() from the server but Providers is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/(admin)/providers.tsx <module evaluation>\",\n    \"Providers\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,YAAY,IAAA,wQAAuB,EAC5C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,+DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 137, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mktod/OneDrive/Documentos/GitHub/saas-oduo/src/app/%28admin%29/providers.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Providers = registerClientReference(\n    function() { throw new Error(\"Attempted to call Providers() from the server but Providers is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/(admin)/providers.tsx\",\n    \"Providers\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,YAAY,IAAA,wQAAuB,EAC5C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,2CACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 151, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mktod/OneDrive/Documentos/GitHub/saas-oduo/src/components/admin/admin-layout-client.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AdminLayoutClient = registerClientReference(\n    function() { throw new Error(\"Attempted to call AdminLayoutClient() from the server but AdminLayoutClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/admin/admin-layout-client.tsx <module evaluation>\",\n    \"AdminLayoutClient\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,oBAAoB,IAAA,wQAAuB,EACpD;IAAa,MAAM,IAAI,MAAM;AAAkP,GAC/Q,8EACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 173, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mktod/OneDrive/Documentos/GitHub/saas-oduo/src/components/admin/admin-layout-client.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AdminLayoutClient = registerClientReference(\n    function() { throw new Error(\"Attempted to call AdminLayoutClient() from the server but AdminLayoutClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/admin/admin-layout-client.tsx\",\n    \"AdminLayoutClient\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,oBAAoB,IAAA,wQAAuB,EACpD;IAAa,MAAM,IAAI,MAAM;AAAkP,GAC/Q,0DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 187, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mktod/OneDrive/Documentos/GitHub/saas-oduo/src/app/%28admin%29/layout.tsx"],"sourcesContent":["import \"@/app/globals.css\"\r\nimport { auth } from \"@/lib/auth\"\r\nimport { redirect } from \"next/navigation\"\r\nimport { Providers } from \"./providers\"\r\nimport { AdminLayoutClient } from \"@/components/admin/admin-layout-client\"\r\n\r\nexport default async function AdminLayout({\r\n  children,\r\n}: {\r\n  children: React.ReactNode\r\n}) {\r\n  const session = await auth()\r\n\r\n  if (!session) {\r\n    redirect(\"/login\")\r\n  }\r\n\r\n  return (\r\n    <Providers>\r\n      <AdminLayoutClient\r\n        tenantName={session.user.tenantName || \"\"}\r\n        userName={session.user.name || \"\"}\r\n        userEmail={session.user.email || \"\"}\r\n      >\r\n        {children}\r\n      </AdminLayoutClient>\r\n    </Providers>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AACA;AACA;;;;;;;AAEe,eAAe,YAAY,EACxC,QAAQ,EAGT;IACC,MAAM,UAAU,MAAM,IAAA,0HAAI;IAE1B,IAAI,CAAC,SAAS;QACZ,IAAA,iMAAQ,EAAC;IACX;IAEA,qBACE,8OAAC,kJAAS;kBACR,cAAA,8OAAC,6KAAiB;YAChB,YAAY,QAAQ,IAAI,CAAC,UAAU,IAAI;YACvC,UAAU,QAAQ,IAAI,CAAC,IAAI,IAAI;YAC/B,WAAW,QAAQ,IAAI,CAAC,KAAK,IAAI;sBAEhC;;;;;;;;;;;AAIT","debugId":null}}]
}