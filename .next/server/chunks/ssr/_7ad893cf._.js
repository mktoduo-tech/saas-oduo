module.exports=[77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},5784,67552,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>c],5784);let d=(0,b.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);a.s(["ChevronUp",()=>d],67552)},14548,a=>{"use strict";let b=(0,a.i(70106).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["Save",()=>b],14548)},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-xl border bg-card text-card-foreground shadow-sm glass-card transition-all duration-300 hover:shadow-md hover:border-primary/20",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight text-gradient",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},70430,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(187),g=a.i(68114);let h=(0,f.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-foreground/90"),i=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(e,{ref:d,className:(0,g.cn)(h(),a),...c}));i.displayName=e.displayName,a.s(["Label",()=>i],70430)},210,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},29246,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},73237,a=>{"use strict";let b=(0,a.i(70106).default)("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);a.s(["Calculator",()=>b],73237)},41398,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246),f=a.i(99570),g=a.i(91119),h=a.i(66718),i=a.i(70430),j=a.i(29246),k=a.i(80701),l=a.i(210),m=a.i(14548),n=a.i(73237),o=a.i(95245),p=a.i(59501),q=a.i(56757);let r=q.z.object({customerId:q.z.string().min(1,"Cliente é obrigatório"),equipmentId:q.z.string().min(1,"Equipamento é obrigatório"),startDate:q.z.string().min(1,"Data de início é obrigatória"),endDate:q.z.string().min(1,"Data de término é obrigatória"),totalPrice:q.z.number().min(0,"Preço deve ser maior ou igual a zero"),status:q.z.enum(["PENDING","CONFIRMED","CANCELLED","COMPLETED"]),notes:q.z.string().optional()});function s(){let a=(0,d.useRouter)(),[q,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)(null),[z,A]=(0,c.useState)(0),{register:B,handleSubmit:C,formState:{errors:D},setValue:E,watch:F}=(0,o.useForm)({resolver:(0,p.zodResolver)(r),defaultValues:{status:"PENDING",totalPrice:0}}),G=F("equipmentId"),H=F("startDate"),I=F("endDate");(0,c.useEffect)(()=>{(async()=>{try{let[a,b]=await Promise.all([fetch("/api/customers"),fetch("/api/equipments?status=AVAILABLE")]);if(a.ok){let b=await a.json();u(b)}if(b.ok){let a=await b.json();w(a)}}catch(a){console.error("Error fetching data:",a)}})()},[]),(0,c.useEffect)(()=>{G?y(v.find(a=>a.id===G)||null):y(null)},[G,v]),(0,c.useEffect)(()=>{if(x&&H&&I){let a=new Date(H),b=Math.ceil((new Date(I).getTime()-a.getTime())/864e5);if(b>0){let a=b*x.pricePerDay;A(a),E("totalPrice",a)}else A(0),E("totalPrice",0)}},[x,H,I,E]);let J=async b=>{try{s(!0);let c={...b,notes:b.notes||null},d=await fetch("/api/bookings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(d.ok)a.push("/reservas"),a.refresh();else{let a=await d.json();alert(a.error||"Erro ao criar reserva")}}catch(a){console.error("Error creating booking:",a),alert("Erro ao criar reserva")}finally{s(!1)}},K=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a);return(0,b.jsxs)("div",{className:"p-8 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(e.default,{href:"/reservas",children:(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(l.ArrowLeft,{className:"h-4 w-4"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground font-headline tracking-wide",children:"Nova Reserva"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Crie uma nova reserva de equipamento"})]})]}),(0,b.jsxs)("form",{onSubmit:C(J),className:"space-y-6",children:[(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{className:"font-headline tracking-wide",children:"Informações da Reserva"}),(0,b.jsx)(g.CardDescription,{children:"Selecione o cliente e o equipamento"})]}),(0,b.jsx)(g.CardContent,{className:"space-y-4",children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(i.Label,{htmlFor:"customerId",children:["Cliente ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsxs)(k.Select,{onValueChange:a=>E("customerId",a),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Selecione um cliente"})}),(0,b.jsx)(k.SelectContent,{children:t.map(a=>(0,b.jsx)(k.SelectItem,{value:a.id,children:a.name},a.id))})]}),D.customerId&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:D.customerId.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(i.Label,{htmlFor:"equipmentId",children:["Equipamento ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsxs)(k.Select,{onValueChange:a=>E("equipmentId",a),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Selecione um equipamento"})}),(0,b.jsx)(k.SelectContent,{children:v.map(a=>(0,b.jsxs)(k.SelectItem,{value:a.id,children:[a.name," -"," ",K(a.pricePerDay),"/dia"]},a.id))})]}),D.equipmentId&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:D.equipmentId.message})]})]})})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{className:"font-headline tracking-wide",children:"Período e Valor"}),(0,b.jsx)(g.CardDescription,{children:"Defina as datas e o valor da reserva"})]}),(0,b.jsxs)(g.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(i.Label,{htmlFor:"startDate",children:["Data de Início ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(h.Input,{id:"startDate",type:"date",...B("startDate"),min:new Date().toISOString().split("T")[0]}),D.startDate&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:D.startDate.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(i.Label,{htmlFor:"endDate",children:["Data de Término ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(h.Input,{id:"endDate",type:"date",...B("endDate"),min:H||new Date().toISOString().split("T")[0]}),D.endDate&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:D.endDate.message})]})]}),z>0&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-4 bg-primary/10 rounded-lg border border-primary/20",children:[(0,b.jsx)(n.Calculator,{className:"h-5 w-5 text-primary"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Valor Calculado"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-primary",children:K(z)})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(i.Label,{htmlFor:"totalPrice",children:["Valor Total ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(h.Input,{id:"totalPrice",type:"number",step:"0.01",...B("totalPrice",{valueAsNumber:!0}),placeholder:"0.00"}),D.totalPrice&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:D.totalPrice.message}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"O valor é calculado automaticamente com base nas datas, mas pode ser ajustado"})]})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{className:"font-headline tracking-wide",children:"Status e Observações"}),(0,b.jsx)(g.CardDescription,{children:"Defina o status inicial e adicione observações"})]}),(0,b.jsxs)(g.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(i.Label,{htmlFor:"status",children:["Status ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsxs)(k.Select,{defaultValue:"PENDING",onValueChange:a=>E("status",a),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"PENDING",children:"Pendente"}),(0,b.jsx)(k.SelectItem,{value:"CONFIRMED",children:"Confirmada"}),(0,b.jsx)(k.SelectItem,{value:"COMPLETED",children:"Concluída"}),(0,b.jsx)(k.SelectItem,{value:"CANCELLED",children:"Cancelada"})]})]}),D.status&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:D.status.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"notes",children:"Observações"}),(0,b.jsx)(j.Textarea,{id:"notes",...B("notes"),placeholder:"Adicione observações sobre a reserva...",rows:4})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,b.jsx)(e.default,{href:"/reservas",children:(0,b.jsx)(f.Button,{type:"button",variant:"outline",disabled:q,children:"Cancelar"})}),(0,b.jsxs)(f.Button,{type:"submit",disabled:q,className:"gap-2",children:[(0,b.jsx)(m.Save,{className:"h-4 w-4"}),q?"Salvando...":"Salvar Reserva"]})]})]})]})}a.s(["default",()=>s])}];

//# sourceMappingURL=_7ad893cf._.js.map