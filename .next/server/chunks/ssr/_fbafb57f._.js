module.exports=[91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-xl border bg-card text-card-foreground shadow-sm glass-card transition-all duration-300 hover:shadow-md hover:border-primary/20",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight text-gradient",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},86304,a=>{"use strict";var b=a.i(87924),c=a.i(187),d=a.i(68114);let e=(0,c.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80 shadow-[0_0_10px_-3px_var(--color-primary)]",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",glass:"border-transparent bg-white/10 text-white backdrop-blur-md hover:bg-white/20"}},defaultVariants:{variant:"default"}});function f({className:a,variant:c,...f}){return(0,b.jsx)("div",{className:(0,d.cn)(e({variant:c}),a),...f})}a.s(["Badge",()=>f])},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},5784,67552,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>c],5784);let d=(0,b.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);a.s(["ChevronUp",()=>d],67552)},96221,a=>{"use strict";let b=(0,a.i(70106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},14548,a=>{"use strict";let b=(0,a.i(70106).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["Save",()=>b],14548)},70430,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(187),g=a.i(68114);let h=(0,f.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-foreground/90"),i=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(e,{ref:d,className:(0,g.cn)(h(),a),...c}));i.displayName=e.displayName,a.s(["Label",()=>i],70430)},210,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},29246,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},73237,a=>{"use strict";let b=(0,a.i(70106).default)("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);a.s(["Calculator",()=>b],73237)},29078,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246),f=a.i(99570),g=a.i(91119),h=a.i(66718),i=a.i(70430),j=a.i(29246),k=a.i(80701),l=a.i(86304),m=a.i(210),n=a.i(14548),o=a.i(73237),p=a.i(96221),q=a.i(95245),r=a.i(59501),s=a.i(56757);let t=s.z.object({customerId:s.z.string().min(1,"Cliente é obrigatório"),equipmentId:s.z.string().min(1,"Equipamento é obrigatório"),startDate:s.z.string().min(1,"Data de início é obrigatória"),endDate:s.z.string().min(1,"Data de término é obrigatória"),totalPrice:s.z.number().min(0,"Preço deve ser maior ou igual a zero"),status:s.z.enum(["PENDING","CONFIRMED","CANCELLED","COMPLETED"]),notes:s.z.string().optional()}),u={PENDING:"Pendente",CONFIRMED:"Confirmada",CANCELLED:"Cancelada",COMPLETED:"Concluída"},v={PENDING:"bg-accent",CONFIRMED:"bg-primary",CANCELLED:"bg-red-500",COMPLETED:"bg-green-500"};function w({params:a}){let{id:s}=(0,c.use)(a),w=(0,d.useRouter)(),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(!0),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)([]),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(0),{register:L,handleSubmit:M,formState:{errors:N},setValue:O,watch:P,reset:Q}=(0,q.useForm)({resolver:(0,r.zodResolver)(t)}),R=P("equipmentId"),S=P("startDate"),T=P("endDate");(0,c.useEffect)(()=>{(async()=>{try{let[a,b,c]=await Promise.all([fetch(`/api/bookings/${s}`),fetch("/api/customers"),fetch("/api/equipments")]);if(a.ok){let b=await a.json();C(b);let c=new Date(b.startDate).toISOString().split("T")[0],d=new Date(b.endDate).toISOString().split("T")[0];Q({customerId:b.customerId,equipmentId:b.equipmentId,startDate:c,endDate:d,totalPrice:b.totalPrice,status:b.status,notes:b.notes||""})}else alert("Reserva não encontrada"),w.push("/reservas");if(b.ok){let a=await b.json();E(a)}if(c.ok){let a=await c.json();G(a)}}catch(a){console.error("Error fetching data:",a),alert("Erro ao carregar dados")}finally{A(!1)}})()},[s,w,Q]),(0,c.useEffect)(()=>{R?I(F.find(a=>a.id===R)||null):I(null)},[R,F]),(0,c.useEffect)(()=>{if(H&&S&&T){let a=new Date(S),b=Math.ceil((new Date(T).getTime()-a.getTime())/864e5);b>0?K(b*H.pricePerDay):K(0)}},[H,S,T]);let U=async a=>{try{y(!0);let b={...a,notes:a.notes||null},c=await fetch(`/api/bookings/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(c.ok)w.push("/reservas"),w.refresh();else{let a=await c.json();alert(a.error||"Erro ao atualizar reserva")}}catch(a){console.error("Error updating booking:",a),alert("Erro ao atualizar reserva")}finally{y(!1)}},V=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a);return z?(0,b.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,b.jsx)(p.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):B?(0,b.jsxs)("div",{className:"p-8 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(e.default,{href:"/reservas",children:(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(m.ArrowLeft,{className:"h-4 w-4"})})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground font-headline tracking-wide",children:"Editar Reserva"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Atualize as informações da reserva"})]}),(0,b.jsx)(l.Badge,{className:v[B.status],variant:"secondary",children:u[B.status]})]}),(0,b.jsxs)("form",{onSubmit:M(U),className:"space-y-6",children:[(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{className:"font-headline tracking-wide",children:"Informações da Reserva"}),(0,b.jsx)(g.CardDescription,{children:"Selecione o cliente e o equipamento"})]}),(0,b.jsx)(g.CardContent,{className:"space-y-4",children:(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(i.Label,{htmlFor:"customerId",children:["Cliente ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsxs)(k.Select,{value:P("customerId"),onValueChange:a=>O("customerId",a),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Selecione um cliente"})}),(0,b.jsx)(k.SelectContent,{children:D.map(a=>(0,b.jsx)(k.SelectItem,{value:a.id,children:a.name},a.id))})]}),N.customerId&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:N.customerId.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(i.Label,{htmlFor:"equipmentId",children:["Equipamento ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsxs)(k.Select,{value:P("equipmentId"),onValueChange:a=>O("equipmentId",a),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Selecione um equipamento"})}),(0,b.jsx)(k.SelectContent,{children:F.map(a=>(0,b.jsxs)(k.SelectItem,{value:a.id,children:[a.name," -"," ",V(a.pricePerDay),"/dia"]},a.id))})]}),N.equipmentId&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:N.equipmentId.message})]})]})})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{className:"font-headline tracking-wide",children:"Período e Valor"}),(0,b.jsx)(g.CardDescription,{children:"Defina as datas e o valor da reserva"})]}),(0,b.jsxs)(g.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(i.Label,{htmlFor:"startDate",children:["Data de Início ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(h.Input,{id:"startDate",type:"date",...L("startDate")}),N.startDate&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:N.startDate.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(i.Label,{htmlFor:"endDate",children:["Data de Término ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(h.Input,{id:"endDate",type:"date",...L("endDate"),min:S}),N.endDate&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:N.endDate.message})]})]}),J>0&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-4 bg-primary/10 rounded-lg border border-primary/20",children:[(0,b.jsx)(o.Calculator,{className:"h-5 w-5 text-primary"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Valor Calculado"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-primary",children:V(J)})]}),(0,b.jsx)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>O("totalPrice",J),children:"Aplicar"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(i.Label,{htmlFor:"totalPrice",children:["Valor Total ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(h.Input,{id:"totalPrice",type:"number",step:"0.01",...L("totalPrice",{valueAsNumber:!0}),placeholder:"0.00"}),N.totalPrice&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:N.totalPrice.message}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"O valor é calculado automaticamente com base nas datas, mas pode ser ajustado"})]})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{className:"font-headline tracking-wide",children:"Status e Observações"}),(0,b.jsx)(g.CardDescription,{children:"Atualize o status e adicione observações"})]}),(0,b.jsxs)(g.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(i.Label,{htmlFor:"status",children:["Status ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsxs)(k.Select,{value:P("status"),onValueChange:a=>O("status",a),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"PENDING",children:"Pendente"}),(0,b.jsx)(k.SelectItem,{value:"CONFIRMED",children:"Confirmada"}),(0,b.jsx)(k.SelectItem,{value:"COMPLETED",children:"Concluída"}),(0,b.jsx)(k.SelectItem,{value:"CANCELLED",children:"Cancelada"})]})]}),N.status&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:N.status.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"notes",children:"Observações"}),(0,b.jsx)(j.Textarea,{id:"notes",...L("notes"),placeholder:"Adicione observações sobre a reserva...",rows:4})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,b.jsx)(e.default,{href:"/reservas",children:(0,b.jsx)(f.Button,{type:"button",variant:"outline",disabled:x,children:"Cancelar"})}),(0,b.jsxs)(f.Button,{type:"submit",disabled:x,className:"gap-2",children:[(0,b.jsx)(n.Save,{className:"h-4 w-4"}),x?"Salvando...":"Salvar Alterações"]})]})]})]}):null}a.s(["default",()=>w])}];

//# sourceMappingURL=_fbafb57f._.js.map