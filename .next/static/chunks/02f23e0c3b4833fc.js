(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99682,e=>{"use strict";var a=e.i(71645);function s(e){let s=a.useRef({value:e,previous:e});return a.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}e.s(["usePrevious",()=>s])},64659,55900,e=>{"use strict";var a=e.i(75254);let s=(0,a.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>s],64659);let r=(0,a.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["ChevronUp",()=>r],55900)},37727,e=>{"use strict";let a=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>a],37727)},15288,e=>{"use strict";var a=e.i(43476),s=e.i(71645),r=e.i(75157);let t=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-xl border bg-card text-card-foreground shadow-sm glass-card transition-all duration-300 hover:shadow-md hover:border-primary/20",e),...s}));t.displayName="Card";let i=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...s}));i.displayName="CardHeader";let l=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight text-gradient",e),...s}));l.displayName="CardTitle";let n=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",e),...s}));n.displayName="CardDescription";let o=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent";let d=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",e),...s}));d.displayName="CardFooter",e.s(["Card",()=>t,"CardContent",()=>o,"CardDescription",()=>n,"CardFooter",()=>d,"CardHeader",()=>i,"CardTitle",()=>l])},10204,e=>{"use strict";var a=e.i(43476),s=e.i(71645),r=e.i(48425),t=s.forwardRef((e,s)=>(0,a.jsx)(r.Primitive.label,{...e,ref:s,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));t.displayName="Label";var i=e.i(25913),l=e.i(75157);let n=(0,i.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-foreground/90"),o=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)(t,{ref:r,className:(0,l.cn)(n(),e),...s}));o.displayName=t.displayName,e.s(["Label",()=>o],10204)},71689,e=>{"use strict";let a=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>a],71689)},24687,e=>{"use strict";var a=e.i(43476),s=e.i(71645),r=e.i(75157);let t=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));t.displayName="Textarea",e.s(["Textarea",()=>t])},41961,e=>{"use strict";var a=e.i(43476);let s=(0,e.i(75254).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var r=e.i(37727),t=e.i(19455),i=e.i(75157);function l({value:e=[],onChange:l,disabled:n,className:o,maxImages:d}){return(0,a.jsxs)("div",{className:(0,i.cn)("space-y-4",o),children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-4",children:e.map((s,i)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("img",{src:s,alt:`Upload ${i+1}`,className:"h-32 w-32 rounded-md object-cover"}),(0,a.jsx)(t.Button,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-6 w-6 opacity-0 group-hover:opacity-100 transition",onClick:()=>{l(e.filter((e,a)=>a!==i))},disabled:n,children:(0,a.jsx)(r.X,{className:"h-4 w-4"})})]},i))}),(0,a.jsxs)(t.Button,{type:"button",variant:"outline",onClick:()=>{if(d&&e.length>=d)return;let a=`https://via.placeholder.com/300x200?text=Image+${e.length+1}`;l([...e,a])},disabled:n||!!d&&e.length>=d,className:"w-full",children:[(0,a.jsx)(s,{className:"mr-2 h-4 w-4"}),"Upload Image",d&&` (${e.length}/${d})`]})]})}e.s(["ImageUpload",()=>l],41961)},37793,e=>{"use strict";var a=e.i(43476),s=e.i(71645),r=e.i(18566),t=e.i(53145),i=e.i(94814),l=e.i(62201),n=e.i(22016),o=e.i(71689),d=e.i(19455),c=e.i(15288),m=e.i(93479),u=e.i(10204),p=e.i(24687),x=e.i(67489),h=e.i(41961),g=e.i(46696);let f=l.object({name:l.string().min(3,"Nome deve ter no mínimo 3 caracteres"),description:l.string().optional(),category:l.string().min(2,"Categoria é obrigatória"),images:l.array(l.string()),pricePerHour:l.string().optional(),pricePerDay:l.string().min(1,"Preço por dia é obrigatório"),quantity:l.string().min(1,"Quantidade é obrigatória"),status:l.enum(["AVAILABLE","RENTED","MAINTENANCE","INACTIVE"])});function y({params:e}){let l=(0,s.use)(e),y=(0,r.useRouter)(),[j,v]=(0,s.useState)(!1),[N,b]=(0,s.useState)(!0),{register:w,handleSubmit:C,setValue:P,watch:q,formState:{errors:E}}=(0,t.useForm)({resolver:(0,i.zodResolver)(f)}),I=q("status"),D=q("images");(0,s.useEffect)(()=>{A()},[]);let A=async()=>{try{b(!0);let e=await fetch(`/api/equipments/${l.id}`);if(!e.ok)throw Error("Equipamento não encontrado");let a=await e.json();P("name",a.name),P("description",a.description||""),P("category",a.category),P("images",a.images||[]),P("pricePerHour",a.pricePerHour?String(a.pricePerHour):""),P("pricePerDay",String(a.pricePerDay)),P("quantity",String(a.quantity)),P("status",a.status)}catch(e){g.toast.error(e.message||"Erro ao carregar equipamento"),y.push("/equipamentos")}finally{b(!1)}},S=async e=>{v(!0);try{let a={name:e.name,description:e.description||null,category:e.category,images:e.images,pricePerHour:e.pricePerHour?parseFloat(e.pricePerHour):null,pricePerDay:parseFloat(e.pricePerDay),quantity:parseInt(e.quantity),status:e.status},s=await fetch(`/api/equipments/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){let e=await s.json();throw Error(e.error||"Erro ao atualizar equipamento")}g.toast.success("Equipamento atualizado com sucesso!"),y.push("/equipamentos"),y.refresh()}catch(e){g.toast.error(e.message||"Erro ao atualizar equipamento")}finally{v(!1)}};return N?(0,a.jsx)("div",{className:"p-8 max-w-4xl mx-auto",children:(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Carregando..."})})}):(0,a.jsxs)("div",{className:"p-8 max-w-4xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.default,{href:"/equipamentos",children:(0,a.jsxs)(d.Button,{variant:"ghost",size:"sm",className:"mb-4",children:[(0,a.jsx)(o.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Voltar"]})}),(0,a.jsx)("h1",{className:"text-4xl font-bold mb-2 font-headline tracking-wide",children:"Editar Equipamento"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Atualize as informações do equipamento"})]}),(0,a.jsx)("form",{onSubmit:C(S),children:(0,a.jsxs)(c.Card,{children:[(0,a.jsxs)(c.CardHeader,{children:[(0,a.jsx)(c.CardTitle,{className:"font-headline tracking-wide",children:"Informações do Equipamento"}),(0,a.jsx)(c.CardDescription,{children:"Atualize os dados do equipamento"})]}),(0,a.jsxs)(c.CardContent,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.Label,{htmlFor:"name",children:"Nome *"}),(0,a.jsx)(m.Input,{id:"name",placeholder:"Ex: Betoneira 400L",disabled:j,...w("name")}),E.name&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:E.name.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.Label,{htmlFor:"description",children:"Descrição"}),(0,a.jsx)(p.Textarea,{id:"description",placeholder:"Descreva o equipamento, características, especificações...",rows:4,disabled:j,...w("description")}),E.description&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:E.description.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.Label,{htmlFor:"category",children:"Categoria *"}),(0,a.jsx)(m.Input,{id:"category",placeholder:"Ex: Construção, Jardinagem, Festa",disabled:j,...w("category")}),E.category&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:E.category.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.Label,{children:"Imagens do Equipamento"}),(0,a.jsx)(h.ImageUpload,{value:D||[],onChange:e=>P("images",e),maxImages:5,disabled:j}),E.images&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:E.images.message})]}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.Label,{htmlFor:"pricePerDay",children:"Preço por Dia (R$) *"}),(0,a.jsx)(m.Input,{id:"pricePerDay",type:"number",step:"0.01",placeholder:"0.00",disabled:j,...w("pricePerDay")}),E.pricePerDay&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:E.pricePerDay.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.Label,{htmlFor:"pricePerHour",children:"Preço por Hora (R$)"}),(0,a.jsx)(m.Input,{id:"pricePerHour",type:"number",step:"0.01",placeholder:"0.00 (opcional)",disabled:j,...w("pricePerHour")}),E.pricePerHour&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:E.pricePerHour.message})]})]}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.Label,{htmlFor:"quantity",children:"Quantidade *"}),(0,a.jsx)(m.Input,{id:"quantity",type:"number",min:"1",disabled:j,...w("quantity")}),E.quantity&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:E.quantity.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(u.Label,{htmlFor:"status",children:"Status *"}),(0,a.jsxs)(x.Select,{value:I,onValueChange:e=>P("status",e),disabled:j,children:[(0,a.jsx)(x.SelectTrigger,{children:(0,a.jsx)(x.SelectValue,{})}),(0,a.jsxs)(x.SelectContent,{children:[(0,a.jsx)(x.SelectItem,{value:"AVAILABLE",children:"Disponível"}),(0,a.jsx)(x.SelectItem,{value:"RENTED",children:"Alugado"}),(0,a.jsx)(x.SelectItem,{value:"MAINTENANCE",children:"Manutenção"}),(0,a.jsx)(x.SelectItem,{value:"INACTIVE",children:"Inativo"})]})]}),E.status&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:E.status.message})]})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,a.jsx)(d.Button,{type:"submit",disabled:j,className:"flex-1",children:j?"Salvando...":"Salvar Alterações"}),(0,a.jsx)(n.default,{href:"/equipamentos",className:"flex-1",children:(0,a.jsx)(d.Button,{type:"button",variant:"outline",disabled:j,className:"w-full",children:"Cancelar"})})]})]})]})})]})}e.s(["default",()=>y])}]);