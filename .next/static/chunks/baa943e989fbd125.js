(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99682,e=>{"use strict";var s=e.i(71645);function r(e){let r=s.useRef({value:e,previous:e});return s.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}e.s(["usePrevious",()=>r])},64659,55900,e=>{"use strict";var s=e.i(75254);let r=(0,s.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>r],64659);let a=(0,s.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["ChevronUp",()=>a],55900)},42147,e=>{"use strict";var s=e.i(43476),r=e.i(71645),a=e.i(18566),i=e.i(22016),t=e.i(19455),l=e.i(15288),n=e.i(93479),o=e.i(10204),c=e.i(67489),d=e.i(71689),m=e.i(56909),u=e.i(53145),h=e.i(94814),x=e.i(81307);let p=x.z.object({name:x.z.string().min(3,"Nome deve ter no mínimo 3 caracteres"),email:x.z.string().email("Email inválido"),password:x.z.string().min(6,"Senha deve ter no mínimo 6 caracteres"),role:x.z.enum(["ADMIN","MANAGER","OPERATOR","VIEWER"])}),j={ADMIN:"Administrador",MANAGER:"Gerente",OPERATOR:"Operador",VIEWER:"Visualizador"},v={ADMIN:"Controle total do sistema (exceto gestão de tenants)",MANAGER:"Pode criar e editar, mas não deletar",OPERATOR:"Cria reservas e visualiza clientes e equipamentos",VIEWER:"Apenas visualização de dados"};function N(){let e=(0,a.useRouter)(),[x,N]=(0,r.useState)(!1),{register:f,handleSubmit:g,control:C,formState:{errors:y}}=(0,u.useForm)({resolver:(0,h.zodResolver)(p)}),b=async s=>{try{N(!0);let r=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(r.ok)e.push("/usuarios"),e.refresh();else{let e=await r.json();alert(e.error||"Erro ao criar usuário")}}catch(e){console.error("Error creating user:",e),alert("Erro ao criar usuário")}finally{N(!1)}};return(0,s.jsxs)("div",{className:"p-8 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(i.default,{href:"/usuarios",children:(0,s.jsx)(t.Button,{variant:"ghost",size:"icon",children:(0,s.jsx)(d.ArrowLeft,{className:"h-4 w-4"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground font-headline tracking-wide",children:"Novo Usuário"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Adicione um novo membro à sua equipe"})]})]}),(0,s.jsxs)("form",{onSubmit:g(b),className:"space-y-6",children:[(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsx)(l.CardTitle,{className:"font-headline tracking-wide",children:"Informações Básicas"}),(0,s.jsx)(l.CardDescription,{children:"Dados do usuário para acesso ao sistema"})]}),(0,s.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(o.Label,{htmlFor:"name",children:["Nome Completo ",(0,s.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,s.jsx)(n.Input,{id:"name",...f("name"),placeholder:"Nome do usuário"}),y.name&&(0,s.jsx)("p",{className:"text-sm text-destructive",children:y.name.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(o.Label,{htmlFor:"email",children:["Email ",(0,s.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,s.jsx)(n.Input,{id:"email",type:"email",...f("email"),placeholder:"usuario@exemplo.com"}),y.email&&(0,s.jsx)("p",{className:"text-sm text-destructive",children:y.email.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(o.Label,{htmlFor:"password",children:["Senha ",(0,s.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,s.jsx)(n.Input,{id:"password",type:"password",...f("password"),placeholder:"Mínimo 6 caracteres"}),y.password&&(0,s.jsx)("p",{className:"text-sm text-destructive",children:y.password.message})]})]})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsx)(l.CardTitle,{className:"font-headline tracking-wide",children:"Função e Permissões"}),(0,s.jsx)(l.CardDescription,{children:"Defina o nível de acesso do usuário no sistema"})]}),(0,s.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(o.Label,{htmlFor:"role",children:["Função ",(0,s.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,s.jsx)(u.Controller,{name:"role",control:C,render:({field:e})=>(0,s.jsxs)(c.Select,{onValueChange:e.onChange,value:e.value,children:[(0,s.jsx)(c.SelectTrigger,{children:(0,s.jsx)(c.SelectValue,{placeholder:"Selecione uma função"})}),(0,s.jsx)(c.SelectContent,{children:["ADMIN","MANAGER","OPERATOR","VIEWER"].map(e=>(0,s.jsx)(c.SelectItem,{value:e,children:(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("div",{className:"font-medium",children:j[e]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:v[e]})]})},e))})]})}),y.role&&(0,s.jsx)("p",{className:"text-sm text-destructive",children:y.role.message})]}),(0,s.jsx)("div",{className:"rounded-lg border border-primary/30 bg-primary/10 p-4 dark:border-primary/40 dark:bg-primary/20",children:(0,s.jsxs)("p",{className:"text-sm text-foreground",children:[(0,s.jsx)("strong",{children:"Nota:"})," O usuário receberá um email com as credenciais de acesso após a criação da conta."]})})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)(i.default,{href:"/usuarios",children:(0,s.jsx)(t.Button,{type:"button",variant:"outline",disabled:x,children:"Cancelar"})}),(0,s.jsxs)(t.Button,{type:"submit",disabled:x,className:"gap-2",children:[(0,s.jsx)(m.Save,{className:"h-4 w-4"}),x?"Criando...":"Criar Usuário"]})]})]})]})}e.s(["default",()=>N])}]);