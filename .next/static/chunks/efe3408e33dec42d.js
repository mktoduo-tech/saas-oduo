(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var s=e.i(43476),a=e.i(71645),r=e.i(75157);let t=a.forwardRef(({className:e,...a},t)=>(0,s.jsx)("div",{ref:t,className:(0,r.cn)("rounded-xl border bg-card text-card-foreground shadow-sm glass-card transition-all duration-300 hover:shadow-md hover:border-primary/20",e),...a}));t.displayName="Card";let i=a.forwardRef(({className:e,...a},t)=>(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...a}));i.displayName="CardHeader";let l=a.forwardRef(({className:e,...a},t)=>(0,s.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight text-gradient",e),...a}));l.displayName="CardTitle";let d=a.forwardRef(({className:e,...a},t)=>(0,s.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",e),...a}));d.displayName="CardDescription";let n=a.forwardRef(({className:e,...a},t)=>(0,s.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",e),...a}));n.displayName="CardContent";let o=a.forwardRef(({className:e,...a},t)=>(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",e),...a}));o.displayName="CardFooter",e.s(["Card",()=>t,"CardContent",()=>n,"CardDescription",()=>d,"CardFooter",()=>o,"CardHeader",()=>i,"CardTitle",()=>l])},87486,e=>{"use strict";var s=e.i(43476),a=e.i(25913),r=e.i(75157);let t=(0,a.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80 shadow-[0_0_10px_-3px_var(--color-primary)]",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",glass:"border-transparent bg-white/10 text-white backdrop-blur-md hover:bg-white/20"}},defaultVariants:{variant:"default"}});function i({className:e,variant:a,...i}){return(0,s.jsx)("div",{className:(0,r.cn)(t({variant:a}),e),...i})}e.s(["Badge",()=>i])},99682,e=>{"use strict";var s=e.i(71645);function a(e){let a=s.useRef({value:e,previous:e});return s.useMemo(()=>(a.current.value!==e&&(a.current.previous=a.current.value,a.current.value=e),a.current.previous),[e])}e.s(["usePrevious",()=>a])},64659,55900,e=>{"use strict";var s=e.i(75254);let a=(0,s.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>a],64659);let r=(0,s.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["ChevronUp",()=>r],55900)},31278,e=>{"use strict";let s=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>s],31278)},95127,e=>{"use strict";var s=e.i(43476),a=e.i(71645),r=e.i(18566),t=e.i(22016),i=e.i(19455),l=e.i(15288),d=e.i(93479),n=e.i(10204),o=e.i(87486),c=e.i(67489),u=e.i(71689),m=e.i(56909),x=e.i(31278),h=e.i(53145),p=e.i(94814),f=e.i(81307);let j=f.z.object({name:f.z.string().min(3,"Nome deve ter no mínimo 3 caracteres"),email:f.z.string().email("Email inválido"),password:f.z.string().min(6,"Senha deve ter no mínimo 6 caracteres").optional().or(f.z.literal("")),role:f.z.enum(["ADMIN","MANAGER","OPERATOR","VIEWER"])}),v={SUPER_ADMIN:"Super Admin",ADMIN:"Administrador",MANAGER:"Gerente",OPERATOR:"Operador",VIEWER:"Visualizador"},N={ADMIN:"Controle total do sistema (exceto gestão de tenants)",MANAGER:"Pode criar e editar, mas não deletar",OPERATOR:"Cria reservas e visualiza clientes e equipamentos",VIEWER:"Apenas visualização de dados"},g={SUPER_ADMIN:"destructive",ADMIN:"default",MANAGER:"secondary",OPERATOR:"outline",VIEWER:"outline"};function y({params:e}){let{id:f}=(0,a.use)(e),y=(0,r.useRouter)(),[C,w]=(0,a.useState)(!1),[b,A]=(0,a.useState)(!0),[R,E]=(0,a.useState)(null),{register:S,handleSubmit:I,control:z,formState:{errors:D},reset:T}=(0,h.useForm)({resolver:(0,p.zodResolver)(j)});(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch(`/api/users/${f}`);if(e.ok){let s=await e.json();E(s),T({name:s.name,email:s.email,password:"",role:s.role})}else alert("Usuário não encontrado"),y.push("/usuarios")}catch(e){console.error("Error fetching user:",e),alert("Erro ao carregar usuário")}finally{A(!1)}})()},[f,y,T]);let M=async e=>{try{w(!0);let s={name:e.name,email:e.email,role:e.role};e.password&&e.password.length>0&&(s.password=e.password);let a=await fetch(`/api/users/${f}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(a.ok)y.push("/usuarios"),y.refresh();else{let e=await a.json();alert(e.error||"Erro ao atualizar usuário")}}catch(e){console.error("Error updating user:",e),alert("Erro ao atualizar usuário")}finally{w(!1)}};return b?(0,s.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,s.jsx)(x.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):R?"SUPER_ADMIN"===R.role?(0,s.jsxs)("div",{className:"p-8 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(t.default,{href:"/usuarios",children:(0,s.jsx)(i.Button,{variant:"ghost",size:"icon",children:(0,s.jsx)(u.ArrowLeft,{className:"h-4 w-4"})})}),(0,s.jsx)("div",{children:(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Editar Usuário"})})]}),(0,s.jsx)(l.Card,{children:(0,s.jsx)(l.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(o.Badge,{variant:"destructive",className:"mb-4",children:"Super Admin"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Super Admins não podem ser editados através deste painel."}),(0,s.jsx)(t.default,{href:"/usuarios",children:(0,s.jsx)(i.Button,{className:"mt-4",children:"Voltar para Usuários"})})]})})})]}):(0,s.jsxs)("div",{className:"p-8 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(t.default,{href:"/usuarios",children:(0,s.jsx)(i.Button,{variant:"ghost",size:"icon",children:(0,s.jsx)(u.ArrowLeft,{className:"h-4 w-4"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground font-headline tracking-wide",children:"Editar Usuário"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Atualize as informações do usuário"})]}),(0,s.jsx)(o.Badge,{variant:g[R.role],children:v[R.role]})]}),(0,s.jsxs)("form",{onSubmit:I(M),className:"space-y-6",children:[(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsx)(l.CardTitle,{className:"font-headline tracking-wide",children:"Informações Básicas"}),(0,s.jsx)(l.CardDescription,{children:"Dados do usuário para acesso ao sistema"})]}),(0,s.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(n.Label,{htmlFor:"name",children:["Nome Completo ",(0,s.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,s.jsx)(d.Input,{id:"name",...S("name"),placeholder:"Nome do usuário"}),D.name&&(0,s.jsx)("p",{className:"text-sm text-destructive",children:D.name.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(n.Label,{htmlFor:"email",children:["Email ",(0,s.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,s.jsx)(d.Input,{id:"email",type:"email",...S("email"),placeholder:"usuario@exemplo.com"}),D.email&&(0,s.jsx)("p",{className:"text-sm text-destructive",children:D.email.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(n.Label,{htmlFor:"password",children:"Nova Senha (opcional)"}),(0,s.jsx)(d.Input,{id:"password",type:"password",...S("password"),placeholder:"Deixe em branco para manter a senha atual"}),D.password&&(0,s.jsx)("p",{className:"text-sm text-destructive",children:D.password.message}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Apenas preencha se desejar alterar a senha do usuário"})]})]})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsx)(l.CardTitle,{className:"font-headline tracking-wide",children:"Função e Permissões"}),(0,s.jsx)(l.CardDescription,{children:"Defina o nível de acesso do usuário no sistema"})]}),(0,s.jsx)(l.CardContent,{className:"space-y-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(n.Label,{htmlFor:"role",children:["Função ",(0,s.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,s.jsx)(h.Controller,{name:"role",control:z,render:({field:e})=>(0,s.jsxs)(c.Select,{onValueChange:e.onChange,value:e.value,children:[(0,s.jsx)(c.SelectTrigger,{children:(0,s.jsx)(c.SelectValue,{placeholder:"Selecione uma função"})}),(0,s.jsx)(c.SelectContent,{children:["ADMIN","MANAGER","OPERATOR","VIEWER"].map(e=>(0,s.jsx)(c.SelectItem,{value:e,children:(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("div",{className:"font-medium",children:v[e]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:N[e]})]})},e))})]})}),D.role&&(0,s.jsx)("p",{className:"text-sm text-destructive",children:D.role.message})]})})]}),(0,s.jsxs)(l.Card,{children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsx)(l.CardTitle,{className:"font-headline tracking-wide",children:"Informações do Sistema"})}),(0,s.jsx)(l.CardContent,{children:(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(n.Label,{className:"text-muted-foreground",children:"Cadastrado em"}),(0,s.jsx)("p",{className:"font-medium",children:new Date(R.createdAt).toLocaleString("pt-BR")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(n.Label,{className:"text-muted-foreground",children:"Última atualização"}),(0,s.jsx)("p",{className:"font-medium",children:new Date(R.updatedAt).toLocaleString("pt-BR")})]})]})})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)(t.default,{href:"/usuarios",children:(0,s.jsx)(i.Button,{type:"button",variant:"outline",disabled:C,children:"Cancelar"})}),(0,s.jsxs)(i.Button,{type:"submit",disabled:C,className:"gap-2",children:[(0,s.jsx)(m.Save,{className:"h-4 w-4"}),C?"Salvando...":"Salvar Alterações"]})]})]})]}):null}e.s(["default",()=>y])}]);